<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PetPetDoc | å…¨æ¸¯ç¸é†«åå–®ç¯©é¸</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans HK', sans-serif; background-color: #FFF9F2; }
        .filter-chip { transition: all 0.2s; border: 1px solid #fed7aa; }
        .filter-chip.active { background-color: #f97316; color: white; border-color: #f97316; }
        #map { height: 100%; width: 100%; }
        .clinic-card { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        /* éš±è—æ»¾å‹•æ¢ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-gray-50">

    <header class="sticky top-0 z-[1000] bg-white shadow-md rounded-b-[30px]">
        <div class="p-4 pb-2 flex items-center gap-3">
            <button onclick="toggleSidebar()" class="text-2xl text-gray-600">â˜°</button>
            <div class="relative flex-1">
                <input type="text" id="mainSearch" onkeyup="filterClinics()" placeholder="è¼¸å…¥è¨ºæ‰€åæˆ–è¡—é“..." 
                    class="w-full bg-gray-100 p-3 pl-10 rounded-xl text-sm outline-none focus:ring-2 ring-orange-400 transition-all">
                <span class="absolute left-3 top-3 opacity-30">ğŸ”</span>
            </div>
            <div class="text-orange-500 font-bold">PetPetDoc</div>
        </div>

        <div class="px-4 pb-4 space-y-3">
            <div class="flex gap-2 overflow-x-auto no-scrollbar">
                <select id="areaFilter" onchange="filterClinics()" class="bg-orange-50 text-orange-700 px-3 py-2 rounded-lg text-xs font-bold border-none outline-none min-w-[100px]">
                    <option value="">æ‰€æœ‰å€åŸŸ</option>
                    <option value="ç£ä»”">ç£ä»”å€</option>
                    <option value="æ±å€">æ±å€</option>
                    <option value="ä¹é¾åŸ">ä¹é¾åŸå€</option>
                    <option value="æ—ºè§’">æ²¹å°–æ—ºå€</option>
                    <option value="æ·±æ°´åŸ—">æ·±æ°´åŸ—å€</option>
                    <option value="æ²™ç”°">æ²™ç”°å€</option>
                    <option value="åŒ—å€">åŒ—å€</option>
                    <option value="é›¢å³¶">é›¢å³¶å€</option>
                </select>
                <button id="btn24hr" onclick="toggleFilter('24hr')" class="filter-chip bg-white px-4 py-2 rounded-lg text-xs font-bold whitespace-nowrap">ğŸ•’ 24å°æ™‚</button>
                <button id="btnER" onclick="toggleFilter('ER')" class="filter-chip bg-white px-4 py-2 rounded-lg text-xs font-bold whitespace-nowrap">ğŸš¨ æ€¥ç—‡æœå‹™</button>
            </div>
        </div>
    </header>

    <main class="p-4">
        <div id="listView" class="space-y-4">
            <div id="resultsCount" class="text-[10px] text-gray-400 font-bold px-2 uppercase tracking-widest">é¡¯ç¤ºæ‰€æœ‰è¨ºæ‰€</div>
            <div id="clinicContainer" class="space-y-4">
                </div>
        </div>

        <div id="mapView" class="hidden fixed inset-0 z-[900] pt-[140px] bg-white">
            <div id="map"></div>
        </div>
    </main>

    <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-lg rounded-full px-6 py-3 flex gap-8 z-[2000] shadow-2xl border border-white/20">
        <button onclick="switchTab('list')" id="tab-list" class="text-white flex flex-col items-center gap-1">
            <span class="text-xl">ğŸ“‹</span><span class="text-[10px] font-bold">åå–®</span>
        </button>
        <button onclick="switchTab('map')" id="tab-map" class="text-gray-400 flex flex-col items-center gap-1">
            <span class="text-xl">ğŸ“</span><span class="text-[10px] font-bold">åœ°åœ–</span>
        </button>
        <button onclick="location.reload()" class="text-gray-400 flex flex-col items-center gap-1">
            <span class="text-xl">ğŸ’¬</span><span class="text-[10px] font-bold">è©•è«–</span>
        </button>
    </nav>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // --- å®Œæ•´æ•¸æ“šåº« ---
        const clinics = [
            { name: "Pets Central åŒ—è§’", area: "æ±å€", address: "åŒ—è§’æ¸£è¯é“70è™Ÿ", phone: "28118907", is24hr: true, hasER: true, rating: 4.8 },
            { name: "æ±å€å‹•ç‰©é†«é™¢", area: "æ±å€", address: "ç­²ç®•ç£ç­²ç®•ç£é“256è™Ÿ", phone: "29153999", is24hr: false, hasER: true, rating: 4.5 },
            { name: "SPCA ç£ä»”ç¸½éƒ¨", area: "ç£ä»”", address: "ç£ä»”é‹ç››è¡—5è™Ÿ", phone: "28020501", is24hr: true, hasER: true, rating: 4.6 },
            { name: "åŸå¤§å‹•ç‰©é†«ç™‚ä¸­å¿ƒ", area: "æ·±æ°´åŸ—", address: "è”æè§’é“339è™Ÿ", phone: "36503000", is24hr: true, hasER: true, rating: 4.7 },
            { name: "NPV éç‰Ÿåˆ©ç¸é†«è¨ºæ‰€", area: "æ—ºè§’", address: "å¤ªå­åŸºéš†è¡—22è™Ÿ", phone: "23932070", is24hr: true, hasER: false, rating: 4.2 },
            { name: "å•Ÿå¾·å‹•ç‰©é†«é™¢", area: "ä¹é¾åŸ", address: "åœŸç“œç£è²´å·è¡—4Nè™Ÿ", phone: "21164417", is24hr: false, hasER: false, rating: 4.0 },
            { name: "æ±æ¶Œç¸é†«ä¸­å¿ƒ", area: "é›¢å³¶", address: "æ±æ¶Œæµ·æ¿±è·¯8è™Ÿ", phone: "23287282", is24hr: false, hasER: false, rating: 4.3 }
        ];

        let activeFilters = { is24hr: false, hasER: false };

        // --- åˆå§‹åŒ–æ¸²æŸ“ ---
        function renderClinics(data) {
            const container = document.getElementById('clinicContainer');
            document.getElementById('resultsCount').innerText = `æ‰¾åˆ° ${data.length} é–“è¨ºæ‰€`;
            container.innerHTML = data.map(c => `
                <div class="clinic-card bg-white p-5 rounded-[24px] shadow-sm border border-gray-100 flex flex-col gap-3">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="flex items-center gap-2">
                                <h3 class="font-bold text-gray-800">${c.name}</h3>
                                ${c.is24hr ? '<span class="bg-red-100 text-red-600 text-[9px] px-2 py-0.5 rounded-full font-bold">24HR</span>' : ''}
                            </div>
                            <p class="text-[11px] text-gray-400 mt-1">ğŸ“ ${c.area} Â· ${c.address}</p>
                        </div>
                        <div class="text-right">
                            <span class="text-orange-500 font-bold text-sm">â˜… ${c.rating}</span>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        ${c.hasER ? '<span class="bg-orange-100 text-orange-600 text-[10px] px-3 py-1 rounded-lg font-bold">ğŸš‘ æ€¥ç—‡æä¾›</span>' : ''}
                        <span class="bg-gray-100 text-gray-500 text-[10px] px-3 py-1 rounded-lg font-bold">ğŸ“ 120+ è©•è«–</span>
                    </div>
                    <div class="flex gap-2 mt-2">
                        <a href="tel:${c.phone}" class="flex-1 bg-orange-500 text-white text-center py-3 rounded-xl font-bold text-xs shadow-md shadow-orange-200">å³åˆ»è‡´é›»</a>
                        <button class="bg-gray-50 text-gray-400 px-4 rounded-xl text-xs font-bold border border-gray-200">è©³æƒ…</button>
                    </div>
                </div>
            `).join('');
        }

        // --- æ ¸å¿ƒç¯©é¸é‚è¼¯ ---
        function filterClinics() {
            const searchVal = document.getElementById('mainSearch').value.toLowerCase();
            const areaVal = document.getElementById('areaFilter').value;
            
            const filtered = clinics.filter(c => {
                const matchSearch = c.name.toLowerCase().includes(searchVal) || c.address.includes(searchVal);
                const matchArea = areaVal === "" || c.area.includes(areaVal);
                const match24 = activeFilters.is24hr ? c.is24hr : true;
                const matchER = activeFilters.hasER ? c.hasER : true;
                return matchSearch && matchArea && match24 && matchER;
            });
            renderClinics(filtered);
        }

        function toggleFilter(type) {
            if(type === '24hr') {
                activeFilters.is24hr = !activeFilters.is24hr;
                document.getElementById('btn24hr').classList.toggle('active');
            } else {
                activeFilters.hasER = !activeFilters.hasER;
                document.getElementById('btnER').classList.toggle('active');
            }
            filterClinics();
        }

        // --- åˆ†é åˆ‡æ› ---
        function switchTab(tab) {
            const list = document.getElementById('listView');
            const mapDiv = document.getElementById('mapView');
            const tabL = document.getElementById('tab-list');
            const tabM = document.getElementById('tab-map');

            if(tab === 'map') {
                list.classList.add('hidden');
                mapDiv.classList.remove('hidden');
                tabL.classList.replace('text-white', 'text-gray-400');
                tabM.classList.replace('text-gray-400', 'text-white');
                setTimeout(() => map.invalidateSize(), 200);
            } else {
                list.classList.remove('hidden');
                mapDiv.classList.add('hidden');
                tabM.classList.replace('text-white', 'text-gray-400');
                tabL.classList.replace('text-gray-400', 'text-white');
            }
        }

        // --- åˆå§‹åŒ– ---
        renderClinics(clinics);
        var map = L.map('map', {zoomControl: false}).setView([22.3193, 114.1694], 12);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);
        clinics.forEach(c => L.marker([22.31, 114.17]).addTo(map)); // ç°¡åŒ–ç‰ˆ Marker

        function toggleSidebar() { alert('é¸å–®åŠŸèƒ½é–‹ç™¼ä¸­...'); }
    </script>
</body>
</html>
