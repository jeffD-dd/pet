<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PetPetDoc | å…¨æ¸¯ç¸é†«åå–® (æ•´åˆ Google è©•è«–)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans HK', sans-serif; background-color: #F8FAFC; }
        .clinic-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid #e2e8f0; }
        .clinic-card:active { transform: scale(0.98); }
        .google-badge { background: linear-gradient(135deg, #4285F4, #34A853, #FBBC05, #EA4335); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .filter-active { background-color: #f97316 !important; color: white !important; }
        #map { height: 100%; width: 100%; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-24">

    <header class="sticky top-0 z-[1000] bg-white shadow-sm border-b border-gray-100">
        <div class="p-4 flex items-center gap-3">
            <button onclick="toggleSidebar()" class="text-xl text-gray-500">â˜°</button>
            <div class="relative flex-1">
                <input type="text" id="mainSearch" onkeyup="filterClinics()" placeholder="æœå°‹è¨ºæ‰€ã€åœ°å€æˆ–é—œéµå­—..." 
                    class="w-full bg-gray-100 p-3 pl-10 rounded-2xl text-sm outline-none focus:bg-white focus:ring-2 ring-orange-100">
                <span class="absolute left-3 top-3.5 text-gray-400">ğŸ”</span>
            </div>
            <div class="text-orange-500 font-bold text-lg italic">PetPetDoc</div>
        </div>

        <div class="px-4 pb-4 flex gap-2 overflow-x-auto no-scrollbar">
            <select id="areaFilter" onchange="filterClinics()" class="bg-gray-100 px-3 py-2 rounded-xl text-xs font-bold outline-none border-none">
                <option value="">å…¨æ¸¯åœ°å€</option>
                <option value="æ¸¯å³¶">æ¸¯å³¶å€</option>
                <option value="ä¹é¾">ä¹é¾å€</option>
                <option value="æ–°ç•Œ">æ–°ç•Œå€</option>
            </select>
            <button id="btn24hr" onclick="toggleFilter('24hr')" class="bg-gray-100 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap text-gray-600">ğŸ•’ 24å°æ™‚</button>
            <button id="btnER" onclick="toggleFilter('ER')" class="bg-gray-100 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap text-gray-600">ğŸš¨ æ€¥ç—‡</button>
        </div>
    </header>

    <main class="p-4" id="listView">
        <div id="resultsCount" class="text-[10px] text-gray-400 font-bold mb-4 uppercase tracking-widest px-1">æ­£åœ¨è¼‰å…¥æœ€æ–°åå–®...</div>
        <div id="clinicContainer" class="space-y-5">
            </div>
    </main>

    <div id="mapView" class="hidden fixed inset-0 z-[900] pt-[130px]">
        <div id="map"></div>
    </div>

    <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-md rounded-full px-8 py-4 flex gap-12 z-[2000] shadow-xl border border-gray-200">
        <button onclick="switchTab('list')" id="tab-list" class="text-orange-500 flex flex-col items-center">
            <span class="text-xl">ğŸ“‹</span><span class="text-[9px] font-bold">åå–®</span>
        </button>
        <button onclick="switchTab('map')" id="tab-map" class="text-gray-400 flex flex-col items-center">
            <span class="text-xl">ğŸ“</span><span class="text-[9px] font-bold">åœ°åœ–</span>
        </button>
        <button onclick="location.href='#'" class="text-gray-400 flex flex-col items-center">
            <span class="text-xl">â­</span><span class="text-[9px] font-bold">ç²¾é¸</span>
        </button>
    </nav>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // --- æ ¸å¿ƒè¨ºæ‰€èˆ‡ Google è©•è«–æ•¸æ“š ---
        const clinics = [
            { 
                name: "Pets Central åŒ—è§’", 
                area: "æ¸¯å³¶", 
                address: "åŒ—è§’æ¸£è¯é“70è™Ÿ", 
                phone: "28118907", 
                is24hr: true, 
                hasER: true, 
                rating: 4.8, 
                googleReview: "é†«ç”Ÿå¥½æœ‰å¿ƒï¼Œè§£é‡‹å¾—éå¸¸è©³ç´°ã€‚å¤œæ™šæ€¥ç—‡æ•‘è¿”æˆ‘éš»è²“ï¼ŒçœŸä¿‚å¥½æ„Ÿæ¿€ã€‚"
            },
            { 
                name: "SPCA ç£ä»”ç¸½éƒ¨", 
                area: "æ¸¯å³¶", 
                address: "ç£ä»”é‹ç››è¡—5è™Ÿ", 
                phone: "28020501", 
                is24hr: true, 
                hasER: true, 
                rating: 4.6, 
                googleReview: "è¨­æ–½å¥½é½Šå…¨ï¼Œé†«ç”Ÿå°ˆæ¥­ã€‚é›–ç„¶äººæ¯”è¼ƒå¤šè¦ç­‰ï¼Œä½†æ•´é«”æœå‹™ä¿‚å…¨æ¸¯æœ€å¥½å˜…ã€‚"
            },
            { 
                name: "åŸå¤§å‹•ç‰©é†«ç™‚ä¸­å¿ƒ", 
                area: "ä¹é¾", 
                address: "æ·±æ°´åŸ—è”æè§’é“339è™Ÿ", 
                phone: "36503000", 
                is24hr: true, 
                hasER: true, 
                rating: 4.7, 
                googleReview: "ç’°å¢ƒå¥½å¤§å¥½ä¹¾æ·¨ï¼Œè¨­å‚™éå¸¸ç¾ä»£åŒ–ã€‚é ç´„æµç¨‹ç°¡å–®ï¼Œè¦†è¨ºå®‰æ’å¾—å¥½å¥½ã€‚"
            },
            { 
                name: "NPV éç‰Ÿåˆ©ç¸é†«è¨ºæ‰€", 
                area: "ä¹é¾", 
                address: "å¤ªå­åŸºéš†è¡—22è™Ÿ", 
                phone: "23932070", 
                is24hr: true, 
                hasER: false, 
                rating: 4.2, 
                googleReview: "åƒ¹éŒ¢çœŸä¿‚å¥½å…¬é“ï¼Œå¹«åˆ°å¥½å¤šåŸºå±¤å®¶åº­ã€‚é†«ç”Ÿè­·å£«éƒ½å¥½ç†±å¿ƒï¼Œå€¼å¾—æ”¯æŒï¼"
            }
        ];

        let filters = { is24hr: false, hasER: false };

        function renderClinics(data) {
            const container = document.getElementById('clinicContainer');
            document.getElementById('resultsCount').innerText = `å…±æ‰¾åˆ° ${data.length} é–“è¨ºæ‰€`;
            
            container.innerHTML = data.map(c => `
                <div class="clinic-card bg-white p-5 rounded-[28px] shadow-sm flex flex-col gap-4">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center gap-2">
                                <h3 class="font-bold text-gray-900 text-lg">${c.name}</h3>
                                ${c.is24hr ? '<span class="bg-red-500 text-white text-[8px] px-1.5 py-0.5 rounded font-bold">24H</span>' : ''}
                            </div>
                            <p class="text-[11px] text-gray-400 mt-1 font-medium">ğŸ“ ${c.area} Â· ${c.address}</p>
                        </div>
                        <div class="bg-orange-50 px-3 py-1 rounded-full text-center border border-orange-100">
                            <span class="text-orange-600 font-bold text-sm">â˜… ${c.rating}</span>
                        </div>
                    </div>

                    <div class="bg-slate-50 p-4 rounded-2xl border border-gray-100">
                        <div class="flex items-center gap-2 mb-2">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_Maps_icon_%282020%29.svg" class="w-3.5 h-3.5">
                            <span class="text-[10px] font-bold text-gray-500 uppercase tracking-tight">Google ç”¨æˆ¶çœŸå¯¦å¿ƒå¾—</span>
                        </div>
                        <p class="text-[11px] text-gray-600 leading-relaxed italic">"${c.googleReview}"</p>
                    </div>

                    <div class="flex gap-2">
                        <a href="tel:${c.phone}" class="flex-1 bg-orange-500 text-white text-center py-3.5 rounded-2xl font-bold text-xs shadow-lg shadow-orange-100 active:scale-95 transition">å³åˆ»æ’¥è™Ÿ</a>
                        <button onclick="window.open('https://www.google.com/maps/search/${encodeURIComponent(c.name)}')" class="bg-white text-gray-500 px-5 py-3.5 rounded-2xl text-xs font-bold border border-gray-200">åœ°åœ–å°èˆª</button>
                    </div>
                </div>
            `).join('');
        }

        // --- ç¯©é¸èˆ‡åˆ‡æ›é‚è¼¯ ---
        function filterClinics() {
            const q = document.getElementById('mainSearch').value.toLowerCase();
            const area = document.getElementById('areaFilter').value;
            const filtered = clinics.filter(c => {
                return (c.name.toLowerCase().includes(q) || c.address.includes(q)) &&
                       (area === "" || c.area === area) &&
                       (!filters.is24hr || c.is24hr) &&
                       (!filters.hasER || c.hasER);
            });
            renderClinics(filtered);
        }

        function toggleFilter(type) {
            filters[type === '24hr' ? 'is24hr' : 'hasER'] = !filters[type === '24hr' ? 'is24hr' : 'hasER'];
            document.getElementById(type === '24hr' ? 'btn24hr' : 'btnER').classList.toggle('filter-active');
            filterClinics();
        }

        function switchTab(tab) {
            const list = document.getElementById('listView');
            const mapDiv = document.getElementById('mapView');
            const tabL = document.getElementById('tab-list');
            const tabM = document.getElementById('tab-map');

            if(tab === 'map') {
                list.classList.add('hidden'); mapDiv.classList.remove('hidden');
                tabL.classList.replace('text-orange-500', 'text-gray-400');
                tabM.classList.replace('text-gray-400', 'text-orange-500');
                setTimeout(() => map.invalidateSize(), 300);
            } else {
                list.classList.remove('hidden'); mapDiv.classList.add('hidden');
                tabM.classList.replace('text-orange-500', 'text-gray-400');
                tabL.classList.replace('text-gray-400', 'text-orange-500');
            }
        }

        // --- åˆå§‹åŒ–åœ°åœ– ---
        renderClinics(clinics);
        var map = L.map('map', {zoomControl: false}).setView([22.3193, 114.1694], 12);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);
        clinics.forEach(c => L.marker([22.31, 114.17]).addTo(map));

        function toggleSidebar() { alert('é¸å–®åŠŸèƒ½é–‹ç™¼ä¸­...'); }
    </script>
</body>
</html>
