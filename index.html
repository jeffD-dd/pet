<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PetPetDoc | å…¨æ¸¯å¯µç‰©é†«ç™‚å°èˆªæ ¼åƒ¹</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans HK', sans-serif; background-color: #FFF9F2; color: #333; }
        #map { height: 500px; width: 100%; border-radius: 24px; z-index: 10; border: 4px solid white; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .tab-active { border-bottom: 4px solid #f97316; color: #f97316; }
        .gps-btn { position: absolute; bottom: 30px; right: 20px; z-index: 1000; background: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.15); border: none; cursor: pointer; }
        .custom-icon { background: none; border: none; }
        .search-results-glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
        /* ä¸‹æ–¹å°è¦½åˆ—æ‰‹æ©Ÿå„ªåŒ– */
        .bottom-nav { box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
    </style>
</head>
<body class="pb-24">

    <nav class="sticky top-0 z-50 p-4 bg-white/90 backdrop-blur-md shadow-sm flex justify-between items-center px-6">
        <div class="text-2xl font-bold text-orange-500 flex items-center">
            <span class="text-3xl mr-2">ğŸ¾</span> PetPetDoc
        </div>
        <div class="flex gap-2">
            <span class="text-[10px] bg-orange-100 text-orange-600 px-2 py-1 rounded-full font-bold">2026 æ•¸æ“šç‰ˆ</span>
        </div>
    </nav>

    <div class="flex justify-around bg-white border-b sticky top-[72px] z-40 text-sm font-bold">
        <button id="btn-map" onclick="showSection('map-section')" class="py-4 px-4 tab-active transition-all">åœ°åœ–æœå°‹</button>
        <button id="btn-price" onclick="showSection('price-section')" class="py-4 px-4 text-gray-400 transition-all">æ ¼åƒ¹/ä¸Šå‚³</button>
        <button id="btn-deals" onclick="showSection('deals-section')" class="py-4 px-4 text-gray-400 transition-all">ä¸»å­è‘—æ•¸</button>
    </div>

    <section id="map-section" class="p-4 space-y-4">
        <div class="relative">
            <input type="text" id="searchInput" onkeyup="searchClinic()" placeholder="è¼¸å…¥è¨ºæ‰€åç¨±ã€åœ°å€ (å¦‚ï¼šæ—ºè§’)..." 
                class="w-full p-4 pl-12 rounded-2xl border-2 border-orange-100 focus:border-orange-500 outline-none bg-white shadow-sm transition-all text-sm">
            <span class="absolute left-4 top-4 opacity-50">ğŸ”</span>
            <div id="searchResults" class="absolute w-full mt-2 rounded-2xl shadow-2xl max-h-64 overflow-y-auto hidden z-[2000] search-results-glass border border-orange-50"></div>
        </div>
        
        <div class="relative">
            <div id="map"></div>
            <button onclick="locateUser()" class="gps-btn text-orange-500 active:scale-90 transition shadow-lg">ğŸ¯</button>
        </div>

        <div class="bg-white p-4 rounded-2xl border border-orange-100 flex items-center gap-4 shadow-sm">
            <div class="bg-orange-100 p-3 rounded-xl text-2xl">ğŸ›¡ï¸</div>
            <div class="flex-1">
                <h4 class="font-bold text-sm">ä¸»å­ä½é™¢é»ç®—å¥½ï¼Ÿ</h4>
                <p class="text-[11px] text-gray-400">é¦–æœˆ $0 å¯µç‰©ä¿éšªè©¦ç”¨ï¼Œå³æ™‚ç”Ÿæ•ˆ</p>
            </div>
            <button class="bg-orange-500 text-white px-4 py-2 rounded-lg text-xs font-bold">äº†è§£</button>
        </div>
    </section>

    <section id="price-section" class="p-6 hidden space-y-6">
        <div class="bg-white rounded-3xl p-6 shadow-lg border border-orange-50">
            <h2 class="text-xl font-bold mb-4 text-orange-600 flex items-center gap-2">ğŸ“Š é†«ç™‚é …ç›®æ ¼åƒ¹</h2>
            <select id="serviceSelect" onchange="checkPrice()" class="w-full p-4 border-2 border-orange-100 rounded-2xl mb-4 bg-white outline-none focus:border-orange-500">
                <option value="0">è«‹é¸æ“‡é …ç›®</option>
                <option value="280">å¹´åº¦å…¥é‡ (5åˆ1/7åˆ1)</option>
                <option value="1500">è²“å’ªçµ•è‚² (é€£åŸºæœ¬æª¢æŸ¥)</option>
                <option value="2800">åŸºæœ¬æ´—ç‰™ (å…¨éº»)</option>
                <option value="450">ä¸€èˆ¬æ—¥é–“é–€è¨ºè¨ºé‡‘</option>
            </select>
            <div id="priceDisplay" class="text-center p-8 bg-orange-50 rounded-2xl hidden">
                <p class="text-gray-500 text-sm">å…¨æ¸¯å¹³å‡å¸‚åƒ¹åƒè€ƒ</p>
                <p id="priceValue" class="text-4xl font-bold text-orange-600 my-2"></p>
                <p class="text-[10px] text-gray-400 mt-2">æ•¸æ“šæ ¹æ“šç”¨æˆ¶ä¸Šå‚³åŠæ”¿åºœè¨»å†Šåå–®ä¼°ç®—</p>
            </div>
        </div>

        <div class="bg-orange-500 rounded-3xl p-6 text-white shadow-xl">
            <h2 class="text-xl font-bold mb-2 flex items-center gap-2">ğŸ“¸ è²¢ç»å–®æ“š</h2>
            <p class="text-sm opacity-90 mb-4">å½±ä½è¨ºæ‰€æ”¶æ“šä¸¦ä¸Šå‚³ï¼Œå¹«å¤§å®¶æ›´æ–°å¸‚åƒ¹ï¼Œä»²å¯ä»¥è³ºå–ç©åˆ†æ›ç¦®å“ï¼</p>
            <label class="block w-full bg-white text-orange-500 text-center py-4 rounded-2xl font-bold cursor-pointer active:scale-95 transition">
                é–‹å§‹ä¸Šå‚³
                <input type="file" class="hidden" onchange="alert('ğŸ“¸ æ”¶åˆ°ï¼å¯©æ ¸å¾Œ 50 ç©åˆ†æœƒå­˜å…¥ä½ å¸³æˆ¶ã€‚')">
            </label>
        </div>
    </section>

    <section id="deals-section" class="p-6 hidden">
        <h2 class="text-2xl font-bold mb-6">ğŸ é™æ™‚è‘—æ•¸</h2>
        <div class="bg-white p-5 rounded-2xl shadow-sm border border-orange-100 flex justify-between items-center mb-4">
            <div>
                <h4 class="font-bold text-gray-800">çš‡å®¶è²“ç³§ $50 ç¾é‡‘åˆ¸</h4>
                <p class="text-xs text-gray-400 font-medium">å…¨æ¸¯ Pet Line åŠæŒ‡å®šè¶…å¸‚é©ç”¨</p>
            </div>
            <button class="bg-orange-500 text-white px-5 py-2 rounded-xl text-xs font-bold shadow-md">é ˜å–</button>
        </div>
    </section>

    <footer class="p-8 text-center text-gray-400 text-[10px] space-y-1">
        <p>Â© 2026 PetPetDoc HK. è³‡æ–™æºè‡ª 2025/08/20 æ”¿åºœç¸é†«åå–®ã€‚</p>
        <p>æœ¬å¹³å°è³‡æ–™åƒ…ä¾›åƒè€ƒï¼Œç·Šæ€¥æƒ…æ³è«‹å³è‡´é›»è¨ºæ‰€ã€‚</p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // --- æ ¸å¿ƒè¨ºæ‰€æ•¸æ“šåº« (å¾æˆªåœ–ä¸­æå–) ---
        const clinics = [
            // æ¸¯å³¶å€
            { name: "æ±å€å‹•ç‰©é†«é™¢", lat: 22.2795, lng: 114.2256, address: "ç­²ç®•ç£ç­²ç®•ç£é“256è™Ÿåœ°ä¸‹", phone: "29153999", is24hr: false },
            { name: "Pets Central åŒ—è§’", lat: 22.2908, lng: 114.2005, address: "åŒ—è§’æ¸£è¯é“70è™Ÿè¬å’Œå¤§å»ˆ", phone: "28118907", is24hr: true },
            { name: "æ˜Ÿé¾å‹•ç‰©é†«é™¢", lat: 22.2889, lng: 114.1921, address: "ç‚®å°å±±å±ˆè‡£é“15è™Ÿç¶­å¤šåˆ©ä¸­å¿ƒ", phone: "25271718", is24hr: false },
            { name: "SPCA ç£ä»”ç¸½éƒ¨", lat: 22.2825, lng: 114.1812, address: "ç£ä»”é‹ç››è¡—5è™Ÿ", phone: "28020501", is24hr: true },
            { name: "å¿«æ´»è°·ç¸é†«ä¸­å¿ƒ", lat: 22.2695, lng: 114.1830, address: "è·‘é¦¬åœ°æºé è¡—15è™Ÿ", phone: "25752389", is24hr: false },
            { name: "The Pet Vet", lat: 22.2768, lng: 114.1715, address: "ç£ä»”ç›§æŠ¼é“5è™Ÿ1æ¨“", phone: "21111319", is24hr: false },
            // ä¹é¾å€
            { name: "å‹•ç‰©é†«ç™‚ä¸­å¿ƒ (24å°æ™‚)", lat: 22.3248, lng: 114.1758, address: "ä½•æ–‡ç”°è‡ªç”±é“11è™Ÿ", phone: "27134155", is24hr: true },
            { name: "VSH Kowloon (24å°æ™‚)", lat: 22.3235, lng: 114.1765, address: "ä½•æ–‡ç”°è‡ªç”±é“7è™Ÿ", phone: "24082588", is24hr: true },
            { name: "NPV éç‰Ÿåˆ©ç¸é†«è¨ºæ‰€", lat: 22.3255, lng: 114.1678, address: "å¤ªå­åŸºéš†è¡—22è™Ÿ", phone: "23932070", is24hr: true },
            { name: "é¦™æ¸¯ç¤¾ä¼å‹•ç‰©é†«é™¢", lat: 22.3238, lng: 114.1700, address: "æ—ºè§’æ°´æ¸ é“44è™Ÿåœ°ä¸‹", phone: "26686618", is24hr: true },
            { name: "åŸå¤§å‹•ç‰©é†«ç™‚ä¸­å¿ƒ (24å°æ™‚)", lat: 22.3364, lng: 114.1485, address: "æ·±æ°´åŸ—è”æè§’é“339è™Ÿ", phone: "36503000", is24hr: true },
            { name: "å•Ÿå¾·å‹•ç‰©é†«é™¢", lat: 22.3168, lng: 114.1865, address: "åœŸç“œç£è²´å·è¡—4Nè™Ÿ", phone: "21164417", is24hr: false },
            { name: "ä¹é¾è²“é†«é™¢", lat: 22.3288, lng: 114.1625, address: "æ·±æ°´åŸ—é´¨å¯®è¡—22è™Ÿ", phone: "23092011", is24hr: false },
            // æ–°ç•Œ/é›¢å³¶
            { name: "åŒ—å€å‹•ç‰©è¨ºæ‰€", lat: 22.5028, lng: 114.1288, address: "ä¸Šæ°´æ–°è±è·¯55è™Ÿ", phone: "23111707", is24hr: false },
            { name: "æ±æ¶Œç¸é†«ä¸­å¿ƒ", lat: 22.2895, lng: 113.9438, address: "æ±æ¶Œæµ·æ¿±è·¯8è™Ÿæµ·å ¤ç£ç•”", phone: "23287282", is24hr: false },
            { name: "Dr Sun å¤ªé™½å‹•ç‰©æœå‹™", lat: 22.2645, lng: 113.9965, address: "å¤§å¶¼å±±æ¢…çª©éº»å¸ƒæ‘31è™Ÿ", phone: "98557529", is24hr: false }
        ];

        // 1. åˆå§‹åŒ–åœ°åœ– (é™åˆ¶é¦™æ¸¯ç¯„åœ)
        const hkBounds = [[22.15, 113.8], [22.58, 114.4]];
        var map = L.map('map', { zoomControl: false, maxBounds: hkBounds, minZoom: 10 }).setView([22.3193, 114.1694], 12);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { attribution: 'Â© CartoDB' }).addTo(map);

        // 2. æ‰¹é‡æ”¾ç½® Marker
        clinics.forEach(c => {
            const iconEmoji = c.is24hr ? "ğŸš¨" : "ğŸ¥";
            var marker = L.marker([c.lat, c.lng], {
                icon: L.divIcon({ html: `<div style="font-size:32px; filter:drop-shadow(0 2px 4px rgba(0,0,0,0.3));">${iconEmoji}</div>`, className: 'custom-icon' })
            }).addTo(map);

            marker.bindPopup(`
                <div style="width:180px">
                    <b style="font-size:14px; color:#f97316;">${c.name}</b><br>
                    <p style="font-size:11px; color:#666; margin:4px 0;">${c.address}</p>
                    <div style="margin-top:10px; display:flex; gap:5px;">
                        <a href="tel:${c.phone}" style="flex:2; background:#f97316; color:white; text-align:center; padding:10px; border-radius:10px; text-decoration:none; font-size:12px; font-weight:bold;">â˜ï¸ è‡´é›»</a>
                        <a href="https://wa.me/?text=æˆ‘å–º PetPetDoc æµåˆ°å‘¢é–“è¨ºæ‰€ä¿¾ä½ ï¼š%0A${c.name}%0Aåœ°å€ï¼š${c.address}%0Aé›»è©±ï¼š${c.phone}" target="_blank" style="flex:1; background:#25D366; color:white; text-align:center; padding:10px; border-radius:10px; text-decoration:none; font-size:18px;">ğŸ’¬</a>
                    </div>
                </div>
            `);
            c.marker = marker;
        });

        // 3. æœå°‹åŠŸèƒ½
        function searchClinic() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const res = document.getElementById('searchResults');
            res.innerHTML = '';
            if(!q) { res.classList.add('hidden'); return; }

            const filtered = clinics.filter(c => c.name.includes(q) || c.address.includes(q));
            if(filtered.length > 0) {
                res.classList.remove('hidden');
                filtered.forEach(c => {
                    const d = document.createElement('div');
                    d.className = "p-4 border-b border-orange-50 active:bg-orange-50 flex justify-between items-center cursor-pointer";
                    d.innerHTML = `<div><div class="font-bold text-sm">${c.name}</div><div class="text-[10px] text-gray-400">${c.address}</div></div><div class="text-orange-400 font-bold">â”</div>`;
                    d.onclick = () => {
                        map.setView([c.lat, c.lng], 16);
                        c.marker.openPopup();
                        res.classList.add('hidden');
                        document.getElementById('searchInput').value = c.name;
                    };
                    res.appendChild(d);
                });
            }
        }

        // 4. å®šä½åŠŸèƒ½
        function locateUser() { map.locate({setView: true, maxZoom: 16}); }
        map.on('locationfound', (e) => { 
            L.circle(e.latlng, e.accuracy).addTo(map);
            L.marker(e.latlng, {icon: L.divIcon({html: 'ğŸ“', className:'custom-icon'})}).addTo(map).bindPopup("ä½ å–ºå‘¢åº¦ï¼").openPopup();
        });

        // 5. åˆ†é åˆ‡æ›
        function showSection(id) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            ['btn-map', 'btn-price', 'btn-deals'].forEach(b => document.getElementById(b).className = "py-4 px-4 text-gray-400 font-bold");
            document.getElementById('btn-' + id.split('-')[0]).className = "py-4 px-4 tab-active font-bold";
            if(id === 'map-section') setTimeout(() => map.invalidateSize(), 300);
        }

        // 6. æ ¼åƒ¹
        function checkPrice() {
            const v = document.getElementById('serviceSelect').value;
            const d = document.getElementById('priceDisplay');
            if(v != "0") { d.classList.remove('hidden'); document.getElementById('priceValue').innerText = "HK$ " + v; }
        }
    </script>
</body>
</html>
