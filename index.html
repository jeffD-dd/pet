<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PetPetDoc | æ¸¯äººå¯µç‰©é†«ç™‚è©•è«–ç¶²</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans HK', sans-serif; background-color: #FFF9F2; }
        #map { height: 450px; width: 100%; border-radius: 24px; z-index: 10; border: 4px solid white; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .tab-active { border-bottom: 4px solid #f97316; color: #f97316; }
        
        /* å´é‚Šé¸å–® */
        #sidebar { transition: transform 0.3s ease-in-out; z-index: 1001; }
        .sidebar-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000; backdrop-filter: blur(2px); }
        
        /* è©•è«–å½ˆçª— */
        #reviewModal { display: none; position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-radius: 30px 30px 0 0; z-index: 2001; padding: 24px; box-shadow: 0 -10px 40px rgba(0,0,0,0.2); }
        
        .star-rating { font-size: 24px; color: #f97316; }
        .comment-card { border-left: 4px solid #f97316; }
    </style>
</head>
<body class="pb-24">

    <div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>
    <div id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-white shadow-2xl transform -translate-x-full">
        <div class="p-6">
            <h3 class="text-xl font-bold text-orange-500 mb-8">PetPetDoc</h3>
            <ul class="space-y-6 font-bold text-gray-600">
                <li onclick="alert('å°šæœªé–‹æ”¾')">ğŸ‘¤ æœƒå“¡ç™»å…¥</li>
                <li onclick="alert('å°šæœªé–‹æ”¾')">ğŸ“ åœ°å€åˆ†ä½ˆåœ–</li>
                <li onclick="alert('å°šæœªé–‹æ”¾')">ğŸ“œ å°ˆæ¥­æ–‡ç« </li>
                <li class="pt-10 text-[10px] text-gray-300">Version 11.0.0 (2026)</li>
            </ul>
        </div>
    </div>

    <nav class="sticky top-0 z-50 p-4 bg-white/90 backdrop-blur-md flex justify-between items-center px-6">
        <div class="flex items-center gap-4">
            <button onclick="toggleSidebar()" class="text-2xl text-gray-600">â˜°</button>
            <div class="text-2xl font-bold text-orange-500">PetPetDoc</div>
        </div>
        <button onclick="openReviewModal()" class="bg-orange-500 text-white px-4 py-2 rounded-full font-bold text-xs">æˆ‘æœ‰é‡è©•</button>
    </nav>

    <div class="flex justify-around bg-white border-b sticky top-[72px] z-40 text-sm font-bold">
        <button id="btn-map" onclick="showSection('map-section')" class="py-4 px-4 tab-active">åœ°åœ–æœå°‹</button>
        <button id="btn-comment" onclick="showSection('comment-section')" class="py-4 px-4 text-gray-400">çœŸå¯¦è©•è«–</button>
        <button id="btn-deals" onclick="showSection('deals-section')" class="py-4 px-4 text-gray-400">è‘—æ•¸å„ªæƒ </button>
    </div>

    <section id="map-section" class="p-4 space-y-4">
        <div class="relative">
            <input type="text" id="searchInput" onkeyup="searchClinic()" placeholder="æœå°‹åœ°å€ã€è¨ºæ‰€..." class="w-full p-4 pl-12 rounded-2xl border-2 border-orange-100 shadow-sm outline-none">
            <span class="absolute left-4 top-4">ğŸ”</span>
            <div id="searchResults" class="absolute w-full mt-2 rounded-2xl shadow-2xl max-h-64 overflow-y-auto hidden z-[2000] bg-white/95 backdrop-blur-md"></div>
        </div>
        <div class="relative">
            <div id="map"></div>
            <button onclick="locateUser()" class="fixed bottom-24 right-6 z-[1000] bg-white w-14 h-14 rounded-full flex items-center justify-center shadow-xl text-orange-500 text-2xl border-none">ğŸ¯</button>
        </div>
    </section>

    <section id="comment-section" class="p-6 hidden space-y-6 animate-fade-in">
        <div class="bg-gradient-to-r from-orange-400 to-orange-500 p-6 rounded-3xl text-white shadow-lg mb-8">
            <p class="text-sm opacity-80">æœ¬é€±æœ€é«˜è©•åƒ¹è¨ºæ‰€</p>
            <h2 class="text-2xl font-bold">åŸå¤§å‹•ç‰©é†«ç™‚ä¸­å¿ƒ ğŸ¾</h2>
            <div class="flex items-center gap-2 mt-2">
                <span class="text-2xl font-bold">4.7</span>
                <span class="text-xl">â˜…â˜…â˜…â˜…â˜…</span>
            </div>
        </div>

        <div id="commentList" class="space-y-4">
            <div class="bg-white p-5 rounded-3xl shadow-sm border border-orange-50 comment-card">
                <div class="flex justify-between items-center mb-2">
                    <span class="font-bold text-gray-800">Pets Central åŒ—è§’</span>
                    <span class="text-orange-500 text-sm font-bold">â˜… 4.8</span>
                </div>
                <p class="text-xs text-gray-600 leading-relaxed italic">ã€Œå¸¶è²“è²“å»ç‡æ€¥ç—‡ï¼Œç’°å¢ƒå¥½ä¹¾æ·¨ï¼Œè­·å£«æ…‹åº¦å¥½å¥½ï¼Œå””æœƒä¸€å‘³å«ä½ åŠ éŒ¢åšå¤šé¤˜é‡ã€‚ã€</p>
                <div class="mt-2 text-[10px] text-gray-400">2026-02-23 â€¢ ç”¨æˆ¶: MeowLover</div>
            </div>
        </div>
    </section>

    <section id="deals-section" class="p-6 hidden">
        <div class="bg-white p-5 rounded-2xl border border-orange-100 flex justify-between items-center">
            <div><h4 class="font-bold">çš‡å®¶è²“ç³§ $50 åˆ¸</h4><p class="text-xs text-gray-400 italic">å…¨æ¸¯ Pet Line é©ç”¨</p></div>
            <button class="bg-orange-500 text-white px-5 py-2 rounded-xl text-xs font-bold">é ˜å–</button>
        </div>
    </section>

    <div id="modalOverlay" class="fixed inset-0 bg-black/50 hidden z-[2000]" onclick="closeReviewModal()"></div>
    <div id="reviewModal">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold">åˆ†äº«ä½ çš„è©•åƒ¹</h3>
            <button onclick="closeReviewModal()" class="text-2xl">&times;</button>
        </div>
        <select class="w-full p-4 bg-gray-50 rounded-xl mb-4 text-sm font-bold outline-none border-none">
            <option>é¸æ“‡è¨ºæ‰€...</option>
            <option>Pets Central åŒ—è§’</option>
            <option>NPV éç‰Ÿåˆ©ç¸é†«</option>
            <option>åŸå¤§å‹•ç‰©é†«ç™‚ä¸­å¿ƒ</option>
        </select>
        <div class="flex gap-2 justify-center mb-4 star-rating">
            <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span class="text-gray-200">â˜…</span>
        </div>
        <textarea placeholder="å¯«ä½ä½ å˜…å¿ƒå¾—ï¼ˆä¾‹å¦‚é†«ç”Ÿå¥½å””å¥½ã€åƒ¹éŒ¢å…¬å””å…¬é“...ï¼‰" class="w-full p-4 h-32 bg-gray-50 rounded-2xl mb-4 text-sm outline-none border-none"></textarea>
        <button onclick="submitReview()" class="w-full bg-orange-500 text-white py-4 rounded-2xl font-bold shadow-xl active:scale-95 transition">æäº¤è©•åƒ¹</button>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const clinics = [
            { name: "æ±å€å‹•ç‰©é†«é™¢", lat: 22.2795, lng: 114.2256, address: "ç­²ç®•ç£é“256è™Ÿ", phone: "29153999", rating: 4.5 },
            { name: "Pets Central åŒ—è§’", lat: 22.2908, lng: 114.2005, address: "åŒ—è§’æ¸£è¯é“70è™Ÿ", phone: "28118907", rating: 4.8 },
            { name: "SPCA ç£ä»”ç¸½éƒ¨", lat: 22.2825, lng: 114.1812, address: "ç£ä»”é‹ç››è¡—5è™Ÿ", phone: "28020501", rating: 4.6 },
            { name: "NPV éç‰Ÿåˆ©ç¸é†«", lat: 22.3255, lng: 114.1678, address: "å¤ªå­åŸºéš†è¡—22è™Ÿ", phone: "23932070", rating: 4.2 },
            { name: "åŸå¤§å‹•ç‰©é†«ç™‚ä¸­å¿ƒ", lat: 22.3364, lng: 114.1485, address: "æ·±æ°´åŸ—è”æè§’é“339è™Ÿ", phone: "36503000", rating: 4.7 }
        ];

        var map = L.map('map', { zoomControl: false }).setView([22.3193, 114.1694], 12);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);

        clinics.forEach(c => {
            var m = L.marker([c.lat, c.lng], {
                icon: L.divIcon({ html: `<div style="font-size:32px;">ğŸ¥</div>`, className: 'custom-icon' })
            }).addTo(map);
            m.bindPopup(`<div style="width:160px"><b style="color:#f97316;">${c.name}</b><br><span style="color:#f97316; font-size:12px;">è©•åˆ†: â˜…${c.rating}</span><br><a href="tel:${c.phone}" style="display:block; background:#f97316; color:white; text-align:center; padding:8px; border-radius:8px; margin-top:8px; text-decoration:none; font-weight:bold;">è‡´é›»: ${c.phone}</a></div>`);
            c.marker = m;
        });

        function toggleSidebar() {
            const s = document.getElementById('sidebar');
            const o = document.getElementById('sidebarOverlay');
            const isOpen = s.style.transform === 'translateX(0%)';
            s.style.transform = isOpen ? 'translateX(-100%)' : 'translateX(0%)';
            o.style.display = isOpen ? 'none' : 'block';
        }

        function openReviewModal() {
            document.getElementById('reviewModal').style.display = 'block';
            document.getElementById('modalOverlay').classList.remove('hidden');
        }

        function closeReviewModal() {
            document.getElementById('reviewModal').style.display = 'none';
            document.getElementById('modalOverlay').classList.add('hidden');
        }

        function submitReview() {
            alert('æ„Ÿè¬ä½ çš„è©•åƒ¹ï¼å¯©æ ¸å¾Œæœƒé¡¯ç¤ºåœ¨åˆ—è¡¨ä¸­ã€‚');
            closeReviewModal();
        }

        function showSection(id) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            ['btn-map', 'btn-comment', 'btn-deals'].forEach(b => {
                document.getElementById(b).className = b === 'btn-' + id.split('-')[0] ? "py-4 px-4 tab-active font-bold" : "py-4 px-4 text-gray-400 font-bold";
            });
            if(id === 'map-section') setTimeout(() => map.invalidateSize(), 300);
        }

        function searchClinic() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const res = document.getElementById('searchResults');
            res.innerHTML = '';
            if(!q) { res.classList.add('hidden'); return; }
            const filtered = clinics.filter(c => c.name.includes(q));
            if(filtered.length > 0) {
                res.classList.remove('hidden');
                filtered.forEach(c => {
                    const d = document.createElement('div');
                    d.className = "p-4 border-b border-orange-50";
                    d.innerHTML = `<div class="font-bold text-sm">${c.name} <span class="text-orange-400">â˜…${c.rating}</span></div>`;
                    d.onclick = () => { map.setView([c.lat, c.lng], 16); c.marker.openPopup(); res.classList.add('hidden'); };
                    res.appendChild(d);
                });
            }
        }
        function locateUser() { map.locate({setView: true, maxZoom: 16}); }
    </script>
</body>
</html>
